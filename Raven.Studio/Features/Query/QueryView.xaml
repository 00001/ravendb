<Infrastructure:View x:Class="Raven.Studio.Features.Query.QueryView"
					 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					 xmlns:Infrastructure="clr-namespace:Raven.Studio.Infrastructure"
					 xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
					 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
					 xmlns:Behaviors="clr-namespace:Raven.Studio.Behaviors"
					 xmlns:Documents="clr-namespace:Raven.Studio.Features.Documents"
					 xmlns:Editors="clr-namespace:Raven.Studio.Controls.Editors">

	<Infrastructure:View.Resources>
		<Style x:Key="PanelTitle"
			   TargetType="TextBlock">
			<Setter Property="FontSize"
					Value="10.667" />
			<Setter Property="Foreground"
					Value="#7F000000" />
		</Style>
	</Infrastructure:View.Resources>

	<toolkit:DockPanel Margin="{StaticResource Margin_ContentPage}">
		<Border Background="{StaticResource Brush_HeaderBackground}"
				MinHeight="40"
				Margin="0,0,0,20"
				CornerRadius="4,4,0,0"
				toolkit:DockPanel.Dock="Top">
			<StackPanel Orientation="Horizontal">
				<HyperlinkButton Content="Indexes"
								 Style="{StaticResource Style_Link_Breadcrumb_Initial}"
								 NavigateUri="/Indexes" />
				<TextBlock Text=">"
						   VerticalAlignment="Center"
						   Margin="4,0" />
				<TextBlock Text="{Binding IndexName}"
						   Style="{StaticResource Style_TextBlock_Breadcrumb}"
						   VerticalAlignment="Center" />
			</StackPanel>
		</Border>

		<StackPanel toolkit:DockPanel.Dock="Top">
			<TextBlock Style="{StaticResource PanelTitle}"
					   Text="Query" />

			<Editors:QueryEditor x:Name="QueryEditor"
								 Text="{Binding Path=Query.Value, Mode=TwoWay}"
								 CompletionProvider="{Binding Path=CompletionProvider.Value}"
								 MinHeight="100" />
			<HyperlinkButton Content="Execute"
							 Command="{Binding Execute}"
							 HorizontalAlignment="Right" />
		</StackPanel>

		<Grid>
			<TextBlock Text="{Binding Error}" Visibility="{Binding Error, Converter={StaticResource HiddenWhenNull}}" />
			<Documents:DocumentsView DataContext="{Binding Path=DocumentsResult.Value}"
									 Visibility="{Binding DocumentsResult.Value, Converter={StaticResource HiddenWhenEmpty}}" />
		</Grid>
		
	</toolkit:DockPanel>
</Infrastructure:View>