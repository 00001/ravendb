<navigation:Page
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           xmlns:Raven_Studio="clr-namespace:Raven.Studio"
           xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
           x:Class="Raven.Studio.Features.Tasks.TasksView"
           mc:Ignorable="d"
           d:DesignWidth="640" d:DesignHeight="480"
           Title="TasksView Page"
           DataContext="{Binding Path=Server.Value.SelectedDatabase.Value}">

  <Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />

    </Grid.RowDefinitions>

    <TextBlock x:Name="HeaderText"
       Style="{StaticResource Style_Text_Header}"
       Text="Tasks" />

    <toolkit:DockPanel Grid.Row="1">
      <ListBox toolkit:DockPanel.Dock="Top" ItemsSource="{Binding Tasks}"
               SelectedItem="{Binding Path=SelectedTask.Value, Mode=TwoWay}"
               Style="{StaticResource Collections_FluidList}" Padding="10">
        <ListBox.ItemsPanel>
          <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
          </ItemsPanelTemplate>
        </ListBox.ItemsPanel>

        <ListBox.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Name}" FontSize="14"/>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>

      <Grid toolkit:DockPanel.Dock="Top">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock FontSize="13" TextWrapping="Wrap" Text="{Binding Path=SelectedTask.Value.Description}"/>
        <Button Grid.Row="1" Content="{Binding Path=SelectedTask.Value.Name}" Width="Auto" HorizontalAlignment="Left"
                Command="{Binding Path=SelectedTask.Value.Action}" Padding="4"
                />
      </Grid>

      <ItemsControl toolkit:DockPanel.Dock="Top"
                    MinHeight="200"
                    ItemsSource="{Binding SelectedTask.Value.Output}"
                    Margin="0,10,0,0">
        <ItemsControl.Template>
          <ControlTemplate>
            <ScrollViewer x:Name="ScrollViewer" VerticalScrollBarVisibility="Auto">
              <ItemsPresenter />
            </ScrollViewer>
          </ControlTemplate>
        </ItemsControl.Template>

        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding}"/>
          </DataTemplate>
        </ItemsControl.ItemTemplate>

      </ItemsControl>
    </toolkit:DockPanel>
  </Grid  >
</navigation:Page>
