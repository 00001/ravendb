<UserControl x:Name="this"
			 x:Class="Raven.Studio.Features.Indexes.EditIndexView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:Editors="clr-namespace:Raven.Studio.Controls.Editors"
			 xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
			 >
	<Grid>

		<ScrollViewer BorderThickness="0"
					  VerticalScrollBarVisibility="Auto"
					  HorizontalScrollBarVisibility="Auto">

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="60" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto"
								   MinHeight="100" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="*" />
					<RowDefinition Height="*" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>

				<TextBlock Text="name" />
				<TextBox Grid.Column="1"
						 Text="{Binding Name, Mode=TwoWay}"
						 Margin="0 0 0 8" />

				<ItemsControl ItemsSource="{Binding Maps}"
							  Grid.Row="1" Grid.ColumnSpan="2">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="60" />
									<ColumnDefinition Width="*" />
								</Grid.ColumnDefinitions>
								
								<TextBlock Text="map" />
								<StackPanel Orientation="Horizontal"
											VerticalAlignment="Top"
											HorizontalAlignment="Right"
											Margin="0,0,4,0">
									<Button x:Name="AddMap"
											Style="{StaticResource FormButton}"
											ToolTipService.ToolTip="Add map."
											Content="+"
											Command="{Binding Path=DataContext.AddMap, ElementName=this}" />
									<Button x:Name="RemoveMap"
											Style="{StaticResource FormButton}"
											ToolTipService.ToolTip="Remove map."
											Content="-"
											Command="{Binding Path=DataContext.RemoveMap, ElementName=this}"
											CommandParameter="{Binding}" />
								</StackPanel>
								
								<Editors:LinqEditor Grid.Column="1"
													Text="{Binding Mode=TwoWay}"
													Height="100" />
							</Grid>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>

				<!--<TextBlock Text="reduce"
						   Visibility="{Binding ShouldShowReduce, Converter={StaticResource visibleWhenTrue}}"
						   Grid.Row="3" />
				<Grid Grid.Row="3"
					  Grid.Column="1">
					<Button x:Name="AddReduce"
							Style="{StaticResource FormButton}"
							VerticalAlignment="Top"
							HorizontalAlignment="Left"
							Content="reduce" />
					<Editors:LinqEditor Text="{Binding Reduce, Mode=TwoWay}"
										Visibility="{Binding ShouldShowReduce, Converter={StaticResource visibleWhenTrue}}" />
				</Grid>

				<sdk:GridSplitter Grid.Row="4"
								Grid.ColumnSpan="2"
								Visibility="{Binding ShouldShowReduce, Converter={StaticResource visibleWhenTrue}}"
								Background="Transparent"
								HorizontalAlignment="Stretch" />

				<TextBlock Text="transform"
						   Visibility="{Binding ShouldShowTransformResults, Converter={StaticResource visibleWhenTrue}}"
						   Grid.Row="5" />
				<Grid Grid.Row="5"
					  Grid.Column="1">
					<Button x:Name="AddTransformResults"
							Style="{StaticResource FormButton}"
							VerticalAlignment="Top"
							HorizontalAlignment="Left"
							Margin="0 0 0 6"
							Content="transform results" />
					<Editors:LinqEditor Visibility="{Binding ShouldShowTransformResults, Converter={StaticResource visibleWhenTrue}}"
										Text="{Binding TransformResults, Mode=TwoWay}" />
				</Grid>

				<sdk:GridSplitter Grid.Row="6"
								Grid.ColumnSpan="2"
								Visibility="{Binding ShouldShowTransformResults, Converter={StaticResource visibleWhenTrue}}"
								Background="Transparent"
								HorizontalAlignment="Stretch" />

				<Button x:Name="AddField"
						Style="{StaticResource FormButton}"
						Grid.Row="7"
						ToolTipService.ToolTip="Customize this index."
						Content="+"
						HorizontalAlignment="Right"
						VerticalAlignment="Top"
						Margin="0,0,4,0" />

				<ItemsControl Grid.Column="1"
							  Grid.Row="7"
							  ItemsSource="{Binding Fields}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border d:DesignWidth="420"
									d:DesignHeight="120"
									BorderBrush="{StaticResource DividerBrush}"
									BorderThickness="1,0,0,0"
									CornerRadius="5"
									Margin="0,0,0,6"
									VerticalAlignment="Top"
									HorizontalAlignment="Left">
								<Grid Margin="4,4,0,4">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="Auto" />
										<ColumnDefinition Width="Auto" />
										<ColumnDefinition Width="Auto" />
										<ColumnDefinition Width="Auto" />
										<ColumnDefinition Width="*" />
									</Grid.ColumnDefinitions>
									<Grid.RowDefinitions>
										<RowDefinition Height="Auto" />
										<RowDefinition Height="4" />
										<RowDefinition Height="Auto" />
										<RowDefinition Height="4" />
										<RowDefinition Height="Auto" />
									</Grid.RowDefinitions>

									<TextBlock Text="field" />
									<TextBox Text="{Binding Name, Mode=TwoWay}"
											 Grid.Column="1"
											 Grid.ColumnSpan="3" />
									<Button Content="-"
											Style="{StaticResource FormButton}"
											HorizontalAlignment="Left"
											Margin="4 0 0 0"
											Grid.Column="4" />

									<TextBlock Text="storage"
											   Grid.Row="2" />
									<ComboBox ItemsSource="{Binding Storage, Converter={StaticResource enumerationFromValue}, Mode=OneTime}"
											  SelectedItem="{Binding Storage, Converter={StaticResource enumeratedValue}, Mode=TwoWay}"
											  Grid.Row="2"
											  Grid.Column="1"
											  MinWidth="80" />

									<TextBlock Text="indexing"
											   Grid.Row="2"
											   Grid.Column="2"
											   Margin="8,0,4,0" />
									<ComboBox ItemsSource="{Binding Indexing, Converter={StaticResource enumerationFromValue}, Mode=OneTime}"
											  SelectedItem="{Binding Indexing, Converter={StaticResource enumeratedValue}, Mode=TwoWay}"
											  Grid.Row="2"
											  Grid.Column="3" />

									<TextBlock Text="sort"
											   Grid.Row="4" />
									<ComboBox ItemsSource="{Binding Sort, Converter={StaticResource enumerationFromValue}, Mode=OneTime}"
											  SelectedItem="{Binding Sort, Converter={StaticResource enumeratedValue}, Mode=TwoWay}"
											  Grid.Row="4"
											  Grid.Column="1" />

									<TextBlock Text="analyzer"
											   Grid.Row="4"
											   Grid.Column="2"
											   Margin="8,0,4,0" />
									<TextBox Text="{Binding Analyzer}"
											 Grid.Row="4"
											 Grid.Column="3"
											 MinWidth="160" />
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>-->
			</Grid>
		</ScrollViewer>
	</Grid>
</UserControl>